
{% extends "base.html" %}

{% block content %}
<link href="../static/css/index.css" rel="stylesheet" type="text/css">



<br>
<nav class="navbar navbar-expand-lg navbar-light bg-light">

<div class="dropdown">
  <button class="btn btn-dark dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
             {% if country=='Vietnam' %}
             Lọc loại vấn đề
             {% elif country=='Japan' %}
             問題の種類の絞り込み
             {% else %}
             Filter type of problems
              {% endif %}
  </button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
    <a class="dropdown-item"
       href="{% if country=='Earth' %}
             {{ url_for('core.education')}}
             {% elif country=='Vietnam' %}
             {{ url_for('vn_core.education') }}
             {% elif country=='Japan' %}
             {{ url_for('jp_core.education') }}
             {% elif country=='USA' %}
             {{ url_for('usa_core.education') }}
              {% endif %}">
             {% if country=='Vietnam' %}
             Giáo dục
             {% elif country=='Japan' %}
             教育
             {% else %}
             Education
              {% endif %} <span class="iconify" data-icon="carbon:education" data-inline="false"></span></a>

    <a class="dropdown-item"
       href="{% if country=='Earth' %}
             {{ url_for('core.health')}}
             {% elif country=='Vietnam' %}
             {{ url_for('vn_core.health') }}
             {% elif country=='Japan' %}
             {{ url_for('jp_core.health') }}
             {% elif country=='USA' %}
             {{ url_for('usa_core.health') }}
              {% endif %}">
             {% if country=='Vietnam' %}
             Sức khoẻ
             {% elif country=='Japan' %}
             健康
             {% else %}
             Health
              {% endif %} <span class="iconify" data-icon="ant-design:heart-outlined" data-inline="false"></span></a>

    <a class="dropdown-item"
       href="{% if country=='Earth' %}
             {{ url_for('core.environment')}}
             {% elif country=='Vietnam' %}
             {{ url_for('vn_core.environment') }}
             {% elif country=='Japan' %}
             {{ url_for('jp_core.environment') }}
             {% elif country=='USA' %}
             {{ url_for('usa_core.environment') }}
              {% endif %}">
             {% if country=='Vietnam' %}
             Môi trường
             {% elif country=='Japan' %}
             環境
             {% else %}
             Environment
              {% endif %} <span class="iconify" data-icon="emojione-monotone:deciduous-tree" data-inline="false"></span></a>

    <a class="dropdown-item"
       href="{% if country=='Earth' %}
             {{ url_for('core.economics')}}
             {% elif country=='Vietnam' %}
             {{ url_for('vn_core.economics') }}
             {% elif country=='Japan' %}
             {{ url_for('jp_core.economics') }}
             {% elif country=='USA' %}
             {{ url_for('usa_core.economics') }}
              {% endif %}">
            {% if country=='Vietnam' %}
             Kinh tế
             {% elif country=='Japan' %}
             経済
             {% else %}
              Economics
              {% endif %} <span class="iconify" data-icon="emojione-monotone:money-with-wings" data-inline="false"></span></a>

    <a class="dropdown-item"
       href="{% if country=='Earth' %}
             {{ url_for('core.society')}}
             {% elif country=='Vietnam' %}
             {{ url_for('vn_core.society') }}
             {% elif country=='Japan' %}
             {{ url_for('jp_core.society') }}
             {% elif country=='USA' %}
             {{ url_for('usa_core.society') }}
              {% endif %}">
            {% if country=='Vietnam' %}
             Xã hội
             {% elif country=='Japan' %}
             社会
             {% else %}
             Society
              {% endif %} <span class="iconify" data-icon="bi:people" data-inline="false"></span></a>

    <a class="dropdown-item"
       href="{% if country=='Earth' %}
             {{ url_for('core.index')}}
             {% elif country=='Vietnam' %}
             {{ url_for('vn_core.index') }}
             {% elif country=='Japan' %}
             {{ url_for('jp_core.index') }}
             {% elif country=='USA' %}
             {{ url_for('usa_core.index') }}
              {% endif %}">
            {% if country=='Vietnam' %}
             Tất cả các loại
             {% elif country=='Japan' %}
             全てのタイプ
             {% else %}
             All types
              {% endif %}</a>
  </div>
</div>

      <p class="nav-item">
        <a class="nav-link" href="#"></a>
      </p>



        <form class="form-inline my-2 my-lg-0 text-right" method=POST>
            {% if country=='Vietnam' %}
             {{ form.search(placeholder="Tìm vấn đề...")}}
             {% elif country=='Japan' %}
             {{ form.search(placeholder="問題を探す...")}}
             {% else %}
             {{ form.search(placeholder="Search for problems...")}}
              {% endif %}
           <input type=submit value=Search>
        </form>

      <p class="nav-item">
        <a class="nav-link" href="#"></a>
      </p>

      <div class="dropdown">
       <button href="#" type="button" class="btn btn-outline-dark" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          {% if country== 'Vietnam' %}
            Quốc gia : Vietnam
            <img class="rounded mx-auto d-block" src="../static/countryflags/vietnam_flag.png" alt="" height="25" width="40">
            {% elif country== 'Japan' %}
             国: Japan
             <img class=" rounded mx-auto d-block" src="../static/countryflags/japan.png" alt="" height="25" width="40">
             {% elif country=='USA' %}
               Country: United States of America
                <img class=" rounded mx-auto d-block" src="../static/countryflags/united states.jpg" alt="" height="25" width="40">
            {% elif country=='Earth' %}
            Country: Earth
            <img class=" rounded mx-auto d-block" src="../static/countryflags/earth.png" alt="" height="25" width="40">
            {% endif %}<span class="iconify" data-icon="si-glyph:arrow-change" data-inline="false"></span>
       </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <a class="dropdown-item" href="{{ url_for('vn_core.index')}}">Vietnam <span class="iconify" data-icon="openmoji:flag-vietnam" data-inline="false"></span>
                <a class="dropdown-item" href="{{ url_for('jp_core.index') }}">Japan <span class="iconify" data-icon="openmoji:flag-japan" data-inline="false"></span></a>
                <a class="dropdown-item" href="{{ url_for('usa_core.index') }}">United States of America <span class="iconify" data-icon="openmoji:flag-united-states" data-inline="false"></span></a>
              <a class="dropdown-item" href="{{ url_for('core.index') }}">Earth/All countries <span class="iconify" data-icon="ion:earth" data-inline="false"></span></a>
          </div>
      </div>



</nav>

<p></p>

{% macro sentence_case(text) %}
    {{ text[0]|upper}}{{text[1:] }}
{% endmacro %}

<div class="container row row-cols-1 row-cols-md-2 text-center">
{% for post in many_posts.items%}

    <div class="card border-dark mb-3 " style="width: 20rem;">
     <div class="card-body ">
         <p class="text-left text-muted"> {% if post.problem_type == 'education' %}
                 <img src="../static/education.png" width="25" height="25" alt="">
                {% elif post.problem_type == 'health' %}
                     <img src="../static/heart.png" width="25" height="25" alt="">
                {% elif post.problem_type == 'environment' %}
                     <img src="../static/tree.png" width="25" height="25" alt="">
                {% elif post.problem_type == 'economics' %}
                     <img src="../static/money.png" width="25" height="25" alt="">
                {% elif post.problem_type == 'society' %}
                     <img src="../static/people.png" width="25" height="25" alt="">
                {% endif %}{{ sentence_case(post.problem_type) }} | Location: {{ post.country }}</p>

         <h7><a class="text-warning" href="{{ url_for('users.user_posts', username=post.creator.first_name+post.creator.middle_name+post.creator.last_name) }}"><img class="text-center rounded" src="{{ url_for('static', filename='profile_pics/'+ post.creator.profile_image) }}" width = "35" height = "35" alt=""> {{ post.creator.first_name}} {{ post.creator.middle_name }} {{ post.creator.last_name }}</a></h7>
         <p></p>
         <img class="text-center rounded responsive1" alt="" src="{{ url_for('static', filename='blog_pics/'+ post.blog_image) }}" width = "495" height = "250">
         {# Need caution for post.blog_image on the code above #}
         <p></p>
         <h2><a class="card-tittle text-body problem" href="{{ url_for('blog_posts.blog_view', blog_validated_id=post.blog_id) }}">{{ post.problem_name[0:40]}}..</a></h2>
         <p class="card-text">{{ post.text[0:100] }}</p>
         <p><small class="text-muted">Posted on: {{ post.date.strftime('%Y-%m-%d') }}</small></p>
         <a class="btn btn-warning" href="{{ url_for('blog_posts.blog_view', blog_validated_id=post.blog_id) }}">Read more</a>
     </div>


    </div>

{% endfor %}



</div>


<nav aria-label="Page navigation example">
         <ul class="pagination justify-content-center">
            {% for page_num in many_posts.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
                {% if many_posts.page==page_num %}
                    <li class='page-item disabled'>
                    <a class="page-link" href="{{ url_for('core.index', page=page_num)}}">{{ page_num }}</a>
                    </li>
                {% else %}
                    <li class='page-item'>
                    <a class="page-link" href="{{ url_for('core.index', page=page_num)}}">{{ page_num }}</a>
                    </li>
                {% endif %}
             {% endfor %}
          </ul>
     </nav>


{% endblock %}

